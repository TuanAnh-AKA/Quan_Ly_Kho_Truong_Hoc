<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout :: head}"></head>
<body>

<div th:replace="~{layout :: sidebar('thietbi')}"></div>

<div th:replace="~{layout :: header}"></div>

<div class="content">
    <div class="container mt-5">
        <h2 class="mb-4" th:text="${thietBi.id != null ? 'üìù C·∫≠p Nh·∫≠t Thi·∫øt B·ªã' : '‚ûï Th√™m Thi·∫øt B·ªã M·ªõi'}"></h2>

        <form th:action="@{/thiet-bi/save}" th:object="${thietBi}" method="post" class="needs-validation" novalidate>

            <input type="hidden" th:field="*{id}" />

            <div class="row g-3">
                <div class="col-md-6">
                    <label for="maThietBi" class="form-label">M√£ Thi·∫øt B·ªã (<span class="text-danger">*</span>)</label>
                    <input type="text" th:field="*{maThietBi}" class="form-control" id="maThietBi"
                           th:readonly="${thietBi.id != null}" required>
                    <div class="invalid-feedback">Vui l√≤ng nh·∫≠p M√£ Thi·∫øt B·ªã.</div>
                    <small th:if="${thietBi.id != null}" class="form-text text-muted">M√£ thi·∫øt b·ªã kh√¥ng th·ªÉ thay ƒë·ªïi sau khi t·∫°o.</small>
                </div>

                <div class="col-md-6">
                    <label for="tenThietBi" class="form-label">T√™n Thi·∫øt B·ªã (<span class="text-danger">*</span>)</label>
                    <input type="text" th:field="*{tenThietBi}" class="form-control" id="tenThietBi" required>
                    <div class="invalid-feedback">Vui l√≤ng nh·∫≠p T√™n Thi·∫øt B·ªã.</div>
                </div>

                <div class="col-md-4">
                    <label for="soLuong" class="form-label">S·ªë L∆∞·ª£ng (<span class="text-danger">*</span>)</label>
                    <input type="number" th:field="*{soLuong}" class="form-control" id="soLuong" min="0" required>
                    <div class="invalid-feedback">S·ªë L∆∞·ª£ng ph·∫£i l√† s·ªë nguy√™n d∆∞∆°ng.</div>
                </div>

                <div class="col-md-4">
                    <label for="ngayNhap" class="form-label">Ng√†y Nh·∫≠p (<span class="text-danger">*</span>)</label>
                    <input type="date" th:field="*{ngayNhap}" class="form-control" id="ngayNhap" required>
                    <div class="invalid-feedback">Vui l√≤ng ch·ªçn Ng√†y Nh·∫≠p.</div>
                </div>

                <div class="col-md-4">
                    <label for="nhaCungCap" class="form-label">Nh√† Cung C·∫•p</label>
                    <input type="text" th:field="*{nhaCungCap}" class="form-control" id="nhaCungCap">
                </div>

                <div class="col-md-6">
                    <label for="loaiThietBi" class="form-label">Lo·∫°i Thi·∫øt B·ªã (<span class="text-danger">*</span>)</label>
                    <select th:field="*{loaiThietBi.id}" id="loaiThietBi" class="form-select" required>
                        <option value="">-- Ch·ªçn Lo·∫°i Thi·∫øt B·ªã --</option>
                        <option th:each="loai : ${dsLoaiThietBi}"
                                th:value="${loai.id}"
                                th:text="${loai.tenLoai}">
                            T√™n Lo·∫°i Thi·∫øt B·ªã
                        </option>
                    </select>
                    <div class="invalid-feedback">Vui l√≤ng ch·ªçn m·ªôt Lo·∫°i Thi·∫øt B·ªã.</div>
                </div>

                <div class="col-12">
                    <label for="moTa" class="form-label">M√¥ t·∫£</label>
                    <textarea th:field="*{moTa}" class="form-control" id="moTa" rows="3"></textarea>
                </div>

                <div class="col-12 mt-4">
                    <button type="submit" class="btn btn-primary me-2">
                        <span th:text="${thietBi.id != null ? 'C·∫≠p Nh·∫≠t' : 'L∆∞u Thi·∫øt B·ªã'}">L∆∞u Thi·∫øt B·ªã</span>
                    </button>
                    <a th:href="@{/thiet-bi}" class="btn btn-secondary">
                        <i class="bi bi-x-circle"></i> H·ªßy
                    </a>
                </div>
            </div>
        </form>
    </div>

    <script>
        // JavaScript cho Bootstrap Form Validation
        (() => {
            'use strict'
            const forms = document.querySelectorAll('.needs-validation')
            Array.from(forms).forEach(form => {
                form.addEventListener('submit', event => {
                    if (!form.checkValidity()) {
                        event.preventDefault()
                        event.stopPropagation()
                    }
                    form.classList.add('was-validated')
                }, false)
            })
        })()
    </script>
</div>

<div th:replace="~{layout :: footer}"></div>

<div th:replace="~{layout :: scripts}"></div>

</body>
</html>